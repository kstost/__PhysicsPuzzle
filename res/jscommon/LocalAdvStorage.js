(function(){var t=function(){let t={client_kind:""};try{t.client_kind=client_kind}catch(t){}this.is_android=t&&"android"===t.client_kind&&window.WVBridge.storage_control,this.is_android&&(this.storage_control=function(t){return t=JSON.stringify(t),window.WVBridge.storage_control(t)}),this.cache={},this.load()};t.prototype={update_cache:function(t,e){let i=this;i.cache[t]=void 0!==e?e:i.get(t,!0),null===i.cache[t]&&delete i.cache[t]},load:function(){let t=this;this.get_keys(!0).forEach(e=>{t.update_cache(e)})},rem:function(t){this.is_android?this.storage_control({mode:"rem",key:t}):localStorage.removeItem(t),this.update_cache(t)},get_keys:function(t){let e;if(t)if(this.is_android){let t=this.storage_control({mode:"get_keys"});e=JSON.parse(t)}else{let t=[];for(let e=0,i=localStorage.length;e<i;e++){let i=localStorage.key(e);t[t.length]=i}e=t}else e=Object.keys(this.cache);return e},set:function(t,e){null==e?this.rem(t):(this.is_android?this.storage_control({mode:"set",key:t,val:JSON.stringify(e)}):localStorage.setItem(t,JSON.stringify(e)),this.update_cache(t,e))},get:function(t,e){let i=null;if(!e){let e=this.cache[t];return void 0===e&&(e=null),e}if(this.is_android){if(i=this.storage_control({mode:"get",key:t}),i)try{let t=JSON.parse(i);return t.advanced_structure?t.data_exists?JSON.parse(t.data_body):null:t}catch(t){return i}}else if(!i){let e=localStorage.getItem(t);if(null!==e){let t=null;try{return t=JSON.parse(e),t}catch(t){}}}return null}},this.LocalAdvStorage=t}).call(this);