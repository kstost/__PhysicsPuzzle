let $pxi={install_pixi_layers:function(){r||(r={}),Object.assign(PIXI.Container.prototype,{render:function(e){this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,this.containerRenderWebGL(e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)},renderCanvas:function(e){this._activeParentLayer&&this._activeParentLayer!=e._activeLayer||(this.visible?(this.displayOrder=e.incDisplayOrder(),this.worldAlpha<=0||!this.renderable||(e._activeLayer=null,this.containerRenderCanvas(e),e._activeLayer=this._activeParentLayer)):this.displayOrder=0)},containerRenderWebGL:PIXI.Container.prototype.render,containerRenderCanvas:PIXI.Container.prototype.renderCanvas}),Object.assign(PIXI.DisplayObject.prototype,{parentLayer:null,_activeParentLayer:null,parentGroup:null,zOrder:0,zIndex:0,updateOrder:0,displayOrder:0,layerableChildren:!0,isLayer:!1}),(PIXI.ParticleContainer||PIXI.ParticleContainer)&&(PIXI.ParticleContainer.prototype.layerableChildren=!1);var e,t,r,i=this&&this.__extends||(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)},function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)});!function(e){var t=function(e){function t(t,r){var i=e.call(this)||this;return i._activeLayer=null,i._activeStage=null,i._activeChildren=[],i._lastUpdateId=-1,i.useRenderTexture=!1,i.useDoubleBuffer=!1,i.sortPriority=0,i.clearColor=new Float32Array([0,0,0,0]),i.canDrawWithoutLayer=!1,i.canDrawInParentStage=!0,i.zIndex=0,i.enableSort=!1,i._tempResult=[],i._tempZero=[],i.useZeroOptimization=!1,i.zIndex=t,i.enableSort=!!r,"function"==typeof r&&i.on("sort",r),i}return i(t,e),t.prototype.doSort=function(e,r){if(this.listeners("sort",!0))for(var i=0;i<r.length;i++)this.emit("sort",r[i]);this.useZeroOptimization?this.doSortWithZeroOptimization(e,r):r.sort(t.compareZIndex)},t.compareZIndex=function(e,t){return e.zOrder<t.zOrder?-1:e.zOrder>t.zOrder?1:e.updateOrder-t.updateOrder},t.prototype.doSortWithZeroOptimization=function(e,t){throw new Error("not implemented yet")},t.prototype.clear=function(){this._activeLayer=null,this._activeStage=null,this._activeChildren.length=0},t.prototype.addDisplayObject=function(e,t){this.check(e),t._activeParentLayer=this._activeLayer,this._activeLayer?this._activeLayer._activeChildren.push(t):this._activeChildren.push(t)},t.prototype.foundLayer=function(e,r){this.check(e),null!=this._activeLayer&&t.conflict(),this._activeLayer=r,this._activeStage=e},t.prototype.foundStage=function(e){this._activeLayer||this.canDrawInParentStage||this.clear()},t.prototype.check=function(e){if(this._lastUpdateId<t._layerUpdateId)this._lastUpdateId=t._layerUpdateId,this.clear(),this._activeStage=e;else if(this.canDrawInParentStage){for(var r=this._activeStage;r&&r!=e;)r=r._activeParentStage;if(this._activeStage=r,null==r)return void this.clear()}},t.conflict=function(){t._lastLayerConflict+5e3<Date.now()&&(t._lastLayerConflict=Date.now(),console.log("PIXI-display plugin found two layers with the same group in one stage - that's not healthy. Please place a breakpoint here and debug it"))},t._layerUpdateId=0,t._lastLayerConflict=0,t}(PIXI.utils.EventEmitter);e.Group=t}(r||(r={})),r||(r={}),t=PIXI.interaction.InteractionManager,Object.assign(t.prototype,{_queue:[[],[]],_displayProcessInteractive:function(e,t,r,i,n){if(!t||!t.visible)return 0;var a=0,o=i=t.interactive||i;t.hitArea&&(o=!1),t._activeParentLayer&&(n=!1);var s=t._mask;r<1/0&&s&&(s.containsPoint(e)||(n=!0)),r<1/0&&t.filterArea&&(t.filterArea.contains(e.x,e.y)||(n=!0));var u=t.children;if(t.interactiveChildren&&u)for(var l=u.length-1;l>=0;l--){var d=u[l],h=this._displayProcessInteractive(e,d,r,o,n);if(h){if(!d.parent)continue;a=h,r=h}}return i&&(n?t.interactive&&this._queueAdd(t,0):(r<t.displayOrder&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(a=t.displayOrder)):t.containsPoint&&t.containsPoint(e)&&(a=t.displayOrder)),t.interactive&&this._queueAdd(t,a===1/0?0:a))),a},processInteractive:function(e,t,r,i,n){var a=null,o=null;o=e.data&&e.data.global?(a=e).data.global:e,this._startInteractionProcess(),this._displayProcessInteractive(o,t,i?0:1/0,!1),this._finishInteractionProcess(a,r)},_startInteractionProcess:function(){this._eventDisplayOrder=1,this._queue||(this._queue=[[],[]]),this._queue[0].length=0,this._queue[1].length=0},_queueAdd:function(e,t){var r=this._queue;if(t<this._eventDisplayOrder)r[0].push(e);else{if(t>this._eventDisplayOrder){this._eventDisplayOrder=t;for(var i=r[1],n=0,a=i.length;n<a;n++)r[0].push(i[n]);r[1].length=0}r[1].push(e)}},_finishInteractionProcess:function(e,t){for(var r=this._queue,i=r[0],n=0,a=i.length;n<a;n++)e?t&&t(e,i[n],!1):t(i[n],!1);for(n=0,a=(i=r[1]).length;n<a;n++)e?(e.target||(e.target=i[n]),t&&t(e,i[n],!0)):t(i[n],!0);var o=this.delayedEvents;if(o&&o.length){e.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var u=0;u<s;u++){var l=o[u],d=l.displayObject,h=l.eventString,c=l.eventData;c.stopsPropagatingAt===d&&(c.stopPropagationHint=!0),this.dispatchEvent(d,h,c)}}}}),function(e){var t=function(){function e(e){this.layer=e,this.renderTexture=null,this.doubleBuffer=null,this.currentBufferIndex=0,this._tempRenderTarget=null,this._tempRenderTargetSource=new PIXI.Rectangle}return e.prototype.initRenderTexture=function(e){var t=e?e.screen.width:100,r=e?e.screen.height:100,i=e?e.resolution:PIXI.settings.RESOLUTION;this.renderTexture=PIXI.RenderTexture.create({width:t,height:r,resolution:i}),this.layer.group.useDoubleBuffer&&(this.doubleBuffer=[PIXI.RenderTexture.create({width:t,height:r,resolution:i}),PIXI.RenderTexture.create({width:t,height:r,resolution:i})])},e.prototype.getRenderTexture=function(){return this.renderTexture||this.initRenderTexture(),this.renderTexture},e.prototype.pushTexture=function(e){var t=e.screen;this.renderTexture||this.initRenderTexture(e);var r=this.renderTexture,i=this.layer.group,n=this.doubleBuffer;if(r.width===t.width&&r.height===t.height&&r.baseTexture.resolution===e.resolution||(r.baseTexture.resolution=e.resolution,r.resize(t.width,t.height),n&&(n[0].baseTexture.resolution=e.resolution,n[0].resize(t.width,t.height),n[1].baseTexture.resolution=e.resolution,n[1].resize(t.width,t.height))),this._tempRenderTarget=e.renderTexture.current,this._tempRenderTargetSource.copyFrom(e.renderTexture.sourceFrame),e.batch.flush(),i.useDoubleBuffer){var a=n[this.currentBufferIndex];a.baseTexture._glTextures[e.CONTEXT_UID]||(e.renderTexture.bind(a,void 0,void 0),e.texture.bind(a),i.clearColor&&e.renderTexture.clear(i.clearColor)),e.texture.unbind(r),r.baseTexture._glTextures=a.baseTexture._glTextures,r.baseTexture.framebuffer=a.baseTexture.framebuffer,a=n[1-this.currentBufferIndex],e.renderTexture.bind(a,void 0,void 0)}else e.renderTexture.bind(r,void 0,void 0);i.clearColor&&e.renderTexture.clear(i.clearColor);var o=e.filter.defaultFilterStack;o.length>1&&(o[o.length-1].renderTexture=e.renderTexture.current)},e.prototype.popTexture=function(e){e.batch.flush();var t=e.filter.defaultFilterStack;t.length>1&&(t[t.length-1].renderTexture=this._tempRenderTarget),e.renderTexture.bind(this._tempRenderTarget,this._tempRenderTargetSource,void 0),this._tempRenderTarget=null;var r=this.renderTexture,i=this.layer.group,n=this.doubleBuffer;if(i.useDoubleBuffer){e.texture.unbind(r),this.currentBufferIndex=1-this.currentBufferIndex;var a=n[this.currentBufferIndex];r.baseTexture._glTextures=a.baseTexture._glTextures,r.baseTexture.framebuffer=a.baseTexture.framebuffer}},e.prototype.destroy=function(){this.renderTexture&&(this.renderTexture.destroy(),this.doubleBuffer&&(this.doubleBuffer[0].destroy(!0),this.doubleBuffer[1].destroy(!0)))},e}();e.LayerTextureCache=t;var r=function(r){function n(t){void 0===t&&(t=null);var i=r.call(this)||this;return i.isLayer=!0,i.group=null,i._activeChildren=[],i._tempChildren=null,i._activeStageParent=null,i._sortedChildren=[],i._tempLayerParent=null,i.insertChildrenBeforeActive=!0,i.insertChildrenAfterActive=!0,null!=t?(i.group=t,i.zIndex=t.zIndex):i.group=new e.Group(0,!1),i._tempChildren=i.children,i}return i(n,r),n.prototype.beginWork=function(e){var t=this._activeChildren;this._activeStageParent=e,this.group.foundLayer(e,this);var r=this.group._activeChildren;t.length=0;for(var i=0;i<r.length;i++)r[i]._activeParentLayer=this,t.push(r[i]);r.length=0},n.prototype.endWork=function(){for(var e=this.children,t=this._activeChildren,r=this._sortedChildren,i=0;i<t.length;i++)this.emit("display",t[i]);if(r.length=0,this.insertChildrenBeforeActive)for(i=0;i<e.length;i++)r.push(e[i]);for(i=0;i<t.length;i++)r.push(t[i]);if(!this.insertChildrenBeforeActive&&this.insertChildrenAfterActive)for(i=0;i<e.length;i++)r.push(e[i]);this.group.enableSort&&this.doSort()},Object.defineProperty(n.prototype,"useRenderTexture",{get:function(){return this.group.useRenderTexture},set:function(e){this.group.useRenderTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"useDoubleBuffer",{get:function(){return this.group.useDoubleBuffer},set:function(e){this.group.useDoubleBuffer=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clearColor",{get:function(){return this.group.clearColor},set:function(e){this.group.clearColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sortPriority",{get:function(){return this.group.sortPriority},set:function(e){this.group.sortPriority=e},enumerable:!0,configurable:!0}),n.prototype.getRenderTexture=function(){return this.textureCache||(this.textureCache=new t(this)),this.textureCache.getRenderTexture()},n.prototype.updateDisplayLayers=function(){},n.prototype.doSort=function(){this.group.doSort(this,this._sortedChildren)},n.prototype._preRender=function(e){return(!this._activeParentLayer||this._activeParentLayer==e._activeLayer)&&(this.visible?(this.displayOrder=e.incDisplayOrder(),!(this.worldAlpha<=0||!this.renderable)&&(this.children!==this._sortedChildren&&this._tempChildren!=this.children&&(this._tempChildren=this.children),this._boundsID++,this.children=this._sortedChildren,this._tempLayerParent=e._activeLayer,e._activeLayer=this,!0)):(this.displayOrder=0,!1))},n.prototype._postRender=function(e){this.children=this._tempChildren,e._activeLayer=this._tempLayerParent,this._tempLayerParent=null},n.prototype.render=function(e){this._preRender(e)&&(this.group.useRenderTexture&&(this.textureCache||(this.textureCache=new t(this)),this.textureCache.pushTexture(e)),this.containerRenderWebGL(e),this._postRender(e),this.group.useRenderTexture&&this.textureCache.popTexture(e))},n.prototype.destroy=function(e){this.textureCache&&(this.textureCache.destroy(),this.textureCache=null),r.prototype.destroy.call(this,e)},n}(PIXI.Container);e.Layer=r,r.prototype.renderCanvas=function(e){this._preRender(e)&&(this.containerRenderCanvas(e),this._postRender(e))}}(r||(r={})),function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.isStage=!0,e._tempGroups=[],e._activeLayers=[],e._activeParentStage=null,e}return i(r,t),r.prototype.clear=function(){this._activeLayers.length=0,this._tempGroups.length=0},r.prototype.destroy=function(e){this.clear(),t.prototype.destroy.call(this,e)},r.prototype._addRecursive=function(e){if(e.visible){if(e.isLayer){var t=e;this._activeLayers.push(t),t.beginWork(this)}if(e!=this&&e.isStage){e.updateAsChildStage(this)}else{var i=e.parentGroup;null!=i&&i.addDisplayObject(this,e);var n=e.parentLayer;if(null!=n&&(i=n.group).addDisplayObject(this,e),e.updateOrder=++r._updateOrderCounter,!(e.alpha<=0||!e.renderable||!e.layerableChildren||i&&i.sortPriority)){var a=e.children;if(a&&a.length)for(var o=0;o<a.length;o++)this._addRecursive(a[o])}}}},r.prototype._addRecursiveChildren=function(e){if(!(e.alpha<=0)&&e.renderable&&e.layerableChildren){var t=e.children;if(t&&t.length)for(var r=0;r<t.length;r++)this._addRecursive(t[r])}},r.prototype._updateStageInner=function(){this.clear(),this._addRecursive(this);for(var e=this._activeLayers,t=0;t<e.length;t++){if((n=e[t]).group.sortPriority){n.endWork();for(var r=n._sortedChildren,i=0;i<r.length;i++)this._addRecursiveChildren(r[i])}}for(t=0;t<e.length;t++){var n;(n=e[t]).group.sortPriority||n.endWork()}},r.prototype.updateAsChildStage=function(e){this._activeParentStage=e,r._updateOrderCounter=0,this._updateStageInner()},r.prototype.updateStage=function(){this._activeParentStage=null,e.Group._layerUpdateId++,this._updateStageInner()},r._updateOrderCounter=0,r}(e.Layer);e.Stage=t}(r||(r={})),function(e){Object.assign(PIXI.Renderer.prototype,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:PIXI.Renderer.prototype.render,render:function(e,t,r,i,n){t||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),this._oldRender(e,t,r,i,n)}});var t=PIXI.CanvasRenderer;t&&Object.assign(t.prototype,{_lastDisplayOrder:0,_activeLayer:null,incDisplayOrder:function(){return++this._lastDisplayOrder},_oldRender:t.prototype.render,render:function(e,t,r,i,n){t||(this._lastDisplayOrder=0),this._activeLayer=null,e.isStage&&e.updateStage(),this._oldRender(e,t,r,i,n)}})}(r||(r={})),function(e){PIXI.display=e}(r||(r={}))},create_view:function(e){return e.view=!0,$pxi.init(e.width,e.height,e.fps_monitor,e)},create_screen:function(e){return document.body.style.backgroundColor=e.body_bgcolor,document.body.style.overflow="hidden",$pxi.init(e.width,e.height,e.fps_monitor,e)},init:function(e,t,r,i){$pxi.install_pixi_layers&&($pxi.install_pixi_layers(),delete $pxi.install_pixi_layers);let n=!!i.view,a={};n||($pxi.GAME_WIDTH=e,$pxi.GAME_HEIGHT=t);let o={width:e,height:t,autoResize:!0,transparent:!!n,resolution:$pxi.display.getRatio(),backgroundColor:i.screen_bgcolor?i.screen_bgcolor:"#000",antialias:!i.disable_antialias};PIXI.utils.skipHello();let s=new PIXI.Application(o);if(PIXI.display&&PIXI.display.Stage&&(s.stage=new PIXI.display.Stage),a.app=s.app,a.stage=s.stage,a.renderer=s.renderer,a.resolution=o.resolution,a.size={width:o.width,height:o.height},!n){s.renderer.view.style.border="0px",s.renderer.view.style.position="absolute";try{a.g_localAdvStorage=new LocalAdvStorage({client_kind:i.client_kind})}catch(e){}try{a.vs=new AdvStore}catch(e){}if(["blocks","moving_things","aiming_line","extend_balls"].forEach(e=>{try{a[e]=new AdvDict}catch(e){}}),$pxi.VS=a.vs,$pxi.APP=a.app,$pxi.STAGE=a.stage,$pxi.RENDERER=s.renderer,$pxi.display.setResizeEvent({stage:a.stage,renderer:s.renderer}),document.body.appendChild(s.renderer.view),r)try{(u=document.createElement("script")).onload=function(){var e=new Stats;e.showPanel(0),document.body.appendChild(e.dom),requestAnimationFrame((function t(){e.update(),requestAnimationFrame(t)}))},u.src="//mrdoob.github.io/stats.js/build/stats.min.js",document.head.appendChild(u)}catch(e){}}var u;return Object.keys(a).forEach(e=>{void 0===a[e]&&delete a[e]}),a},display:{vrRatio:function(){let e=$pxi.GAME_WIDTH,t=$pxi.GAME_HEIGHT;return Math.min(window.innerWidth/e,window.innerHeight/t)},getRatio:function(){return"ios"===(e=>{try{return client_kind}catch(e){return""}})()?1:window.devicePixelRatio},resize:function(e){let t=e.stage,r=e.renderer,i=$pxi.display.vrRatio(),n=$pxi.display.getRatio(),a=window.innerWidth,o=window.innerWidth*($pxi.GAME_HEIGHT/$pxi.GAME_WIDTH);window.innerHeight<o&&(o=window.innerHeight,a=$pxi.GAME_WIDTH*o/$pxi.GAME_HEIGHT);let s=function(e,t,r){let i=$pxi.display.getRatio();return e.resize(t,r),{width:e.view.width/window.innerWidth/i,height:e.view.height/window.innerHeight/i}}(r,a,o),u=1;u=s.height,t.scale.x=t.scale.y=i/u,r.resize(a/u,o/u),r.view.width/n>window.innerWidth&&(u=s.width,t.scale.x=t.scale.y=i/u,r.resize(a/u,o/u)),r.view.style.top=(window.innerHeight-r.view.height/n)/2+"px",r.view.style.left=(window.innerWidth-r.view.width/n)/2+"px"},setResizeEvent:function(e){window.addEventListener("resize",function(){$pxi.display.resize(this)}.bind(e)),window.dispatchEvent(new Event("resize"))}},get_canvas:function(){return RENDERER.view},get_canvas_size:function(){return $pxi.get_canvas().getBoundingClientRect()},cca:function(e){return e*($pxi.get_canvas_size().height/GAME_HEIGHT)},cco:function(e){return e/$pxi.display.vrRatio()},ccc:function(e){return e/GAME_SCALE},ccx:function(e){return e*GAME_SCALE},set_sprite_size:function(e,t,r){e.scale.x=t/e.texture.width,e.scale.y=r/e.texture.height},get_sprite_size:function(e){return{width:e.scale.x*e.texture.width,height:e.scale.y*e.texture.height}},get_group:function(e,t,r){void 0===t&&(t=0);let i=vs.get(e,()=>{let e=CONTAINER.view(r),i=new PIXI.display.Group(t,!0),n=new PIXI.display.Layer(i);return e.addChild(n),i.toContainer=function(){return e},i},!0);return!0===t?i._activeLayer.parent:i},sort_list_by_object_key:function(e,t){return e.sort(function(e,t){let r=e[this],i=t[this];"String"===r.constructor.name&&(r=r.toUpperCase()),"String"===i.constructor.name&&(i=i.toUpperCase());let n=0;return r>i?n=1:r<i&&(n=-1),n}.bind(t))},color:function(e,t,r){return 65536*e+256*t+r},image_sprite:function(e){let t=new PIXI.Sprite(e.texture);return $pxi.set_sprite_size(t,$pxi.ccc(t.texture.width),$pxi.ccc(t.texture.height)),t.x=($pxi.ccc(GAME_VIRTUAL_WIDTH)-t.width)/2,t.y=0,t},textlabel:function({text:e,group:t,size:r,parent:i,family:n}){let a=new PixiText({style:{fontFamily:n,fill:"#ffffff",stroke:"#000000",strokeThickness:0,dropShadow:!0,dropShadowColor:"#ffffff",dropShadowBlur:0,dropShadowAngle:Math.PI/6,dropShadowDistance:0}}),o=a.getNode();return o.parentGroup=t||i.parentGroup,a.text=e,a.size=r,a.x=a.width/2,a.y=a.height/2,i.addChild(o),a},met:function(e,t){let r,i=performance.now(),n=vs.get("SPEEDCHECK");return void 0===n||t||(r=i-n,e=e||""),vs.set("SPEEDCHECK",i),r},addChild:function(e,t,r){t instanceof PIXI.Sprite&&(r||(t.parentGroup=e),e.toContainer().addChild(t)),t instanceof PixiText&&(t.getNode().parentGroup=e,e.toContainer().addChild(t.getNode())),t instanceof PixiTile&&(t.node.parentGroup=e,e.toContainer().addChild(t.node))}};!function(e,t){let r=0,i=[],n=function(){let n=r+i.length;t.progress&&t.progress(Math.round(n/e.length*100)),n===e.length&&(i.length?t.fail&&t.fail(i):t.success&&t.success())},a=function(e){e.cnt++;let t=e.url,o=document.createElement("script");document.head.appendChild(o),o.onload=function(){r++,n()},o.onerror=function(){o.parentElement.removeChild(o),10>e.cnt?a(e):(i.push(t),n())},o.src=t};e.forEach(e=>{a({url:e,cnt:0})})}(((()=>{try{return extend_resource_list,!0}catch(e){return!1}})()?extend_resource_list:[]).concat(["https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.0/pixi.js"].map(e=>{let t=e.split("/"),r=(e=>{try{return offline_resource_path}catch(e){return""}})(),i=(e=>{try{return client_kind}catch(e){return""}})();(e=>{try{ios_res_path}catch(e){return""}})();return"ios"!==i&&"android"!==i||(r=ios_builtins_path),"iok"===i&&(r=offline_resource_path),r?r+t[t.length-1]:e})),{progress:e=>{try{progress(e)}catch(e){}},success:()=>{try{let e=setInterval(()=>{let t;try{t=main}catch(e){}t&&(clearInterval(e),t())},1)}catch(e){}try{$pxx.common.is_android_hybrid_app()&&($pxx.common.hybrid_native_call("gen_adf_view",{bgcolor:{r:0,g:0,b:0}}),$pxx.common.hybrid_native_call("turnWebViewMain",{})),$pxx.common.is_ios_hybrid_app()&&$pxx.common.hybrid_native_call("showWebView",{})}catch(e){}}});